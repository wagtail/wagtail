{# common formset mechanism underpinning page_permission_formset and collection_permission_formset #}

{% load i18n wagtailadmin_tags %}
<h2>{% block title %}{% endblock %}</h2>

{{ formset.management_form }}

<table class="listing">
    <col width="40%"/>
    <col width="40%" />
    <col />
    <thead>
        <tr>
            <th>{% block resource_type_heading %}{% endblock %}</th>
            <th>{% trans "Permission type" %}</th>
            <th></th>
        </tr>
    </thead>
    <tbody id="id_{{ formset.prefix }}-FORMS">
        {% for form in formset.forms %}
            <tr id="inline_child_{{ form.prefix }}"{% if form.DELETE.value %} style="display: none;"{% endif %}>
                {% if form.non_field_errors %}
                    <p class="error-message">
                        {% for error in form.non_field_errors %}
                            <span>{{ error|escape }}</span>
                        {% endfor %}
                    </p>
                {% endif %}
                {% block form %}{% endblock %}
            </tr>
        {% endfor %}
    <tbody>
</table>

<script type="text/django-form-template" id="id_{{ formset.prefix }}-EMPTY_FORM_TEMPLATE">
{% escapescript %}
    <tr id="inline_child_{{ formset.empty_form.prefix }}">
        {% block empty_form %}{% endblock %}
    </tr>
{% endescapescript %}
</script>

<p class="add">
    {% block add_button %}{% endblock %}
</p>
