{% extends "wagtailadmin/edit_handlers/inline_panel.html" %}

{% load i18n %}
{% load l10n %}
{% load staticfiles %}
{% load wagtailimages_tags %}

{% block extension %}

<fieldset class="multiple_images_panel_uploader">
    <legend>Uploader</legend>
    <div class="upload_area">

        <div class="drop-zone">
            <p>{% trans "Drag and drop images into this area to upload immediately." %}</p>
            <p>{{ help_text }}</p>
            <div class="replace-file-input">
                <button class="button bicolor icon icon-plus">{% trans "Or choose from your computer" %}</button>
                <input id="{{self.formset.prefix}}-fileupload" type="file" name="files[]"
                       data-url="{% url 'wagtailimages:add_multiple' %}"
                       multiple>
            </div>
            {% if collections %}
                <div class="field">
                    <label for="id_{{self.formset.prefix}}_addimage_collection">{% trans "Add to collection:" %}</label>
                    <div class="field-content">
                        <select id="id_{{self.formset.prefix}}_addimage_collection" name="collection">
                            {% for collection in collections %}
                                <option value="{{ collection.id|unlocalize }}">{{ collection.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            {% endif %}

            <div id="{{self.formset.prefix}}-overall-progress" class="progress progress-secondary">
                <div class="bar" style="width: 0%;">0%</div>
            </div>
        </div>

        <ul id="{{self.formset.prefix}}-upload-list" class="upload-list multiple"></ul>

        <script id="{{self.formset.prefix}}-upload-list-item" type="text/template">
            <li class="row">
                <div class="left col3">
                    <div class="preview">
                        <div class="thumb icon icon-image"></div>
                        <div class="progress">
                            <div class="bar" style="width: 0%;"></div>
                        </div>
                    </div>
                </div>
                <div class="right col9">
                    <p class="status-msg success">{% trans "Upload successful." %}</p>
                    <p class="status-msg failure">{% trans "Sorry, upload failed." %}</p>
                    <p class="status-msg server-error">
                        <strong>{% trans "Server Error" %}</strong>
                        {% trans "Report this error to your webmaster with the following information:"%}
                        <br /><span class="error-text"></span> - <span class="error-code"></span>
                    </p>
                    <p class="status-msg update-success">{% trans "Image updated." %}</p>
                    <p class="status-msg failure error_messages"></p>
                </div>
            </li>
        </script>
    </div>
</fieldset>

{% endblock %}



