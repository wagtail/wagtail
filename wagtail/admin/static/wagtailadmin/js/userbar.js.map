{"version":3,"sources":["webpack://wagtail/./client/src/entrypoints/admin/userbar.js"],"names":["document","addEventListener","e","userbar","querySelector","trigger","list","className","hasTouch","window","clickEvent","hideUserbar","classList","remove","sandboxClick","removeEventListener","clickOutside","toggleUserbar","e2","stopPropagation","contains","add","preventDefault"],"mappings":"AAGAA,SAASC,iBAAiB,oBAAoB,SAAUC,GACpD,IAAIC,EAAUH,SAASI,cAAc,0BACjCC,EAAUF,EAAQC,cAAc,kCAChCE,EAAOH,EAAQC,cAAc,0BAC7BG,EAAY,YACZC,EAAW,iBAAkBC,OAC7BC,EAAa,QA0BjB,SAASC,IACLR,EAAQS,UAAUC,OAAON,GAEzBD,EAAKL,iBAAiBS,EAAYI,GAAc,GAEhDL,OAAOM,oBAAoBL,EAAYM,GAAc,GAEzD,SAASC,EAAcC,GACnBA,EAAGC,kBACChB,EAAQS,UAAUQ,SAASb,GAC3BI,KAhBJR,EAAQS,UAAUS,IAAId,GAEtBD,EAAKL,iBAAiBS,EAAYI,GAAc,GAEhDL,OAAOR,iBAAiBS,EAAYM,GAAc,IAkBtD,SAASF,EAAaI,GAClBA,EAAGC,kBAEP,SAASH,IACLL,IA7CAH,GACAL,EAAQS,UAAUS,IAAI,SAGtBhB,EAAQJ,iBAAiB,YAAY,SAAUiB,GAC3ChB,EAAEoB,iBAEFL,EAAcC,OAIlBf,EAAQS,UAAUS,IAAI,YAG1BhB,EAAQJ,iBAAiBS,EAAYO,GAAe,GAGpDR,OAAOR,iBAAiB,WAAYU,GAAa","file":"wagtail/admin/static/wagtailadmin/js/userbar.js","sourcesContent":["// This entrypoint is not bundled with any polyfills to keep it as light as possible\n// Please stick to old JS APIs and avoid importing anything that might require a vendored module\n// More background can be found in webpack.config.js\ndocument.addEventListener('DOMContentLoaded', function (e) {\n    var userbar = document.querySelector('[data-wagtail-userbar]');\n    var trigger = userbar.querySelector('[data-wagtail-userbar-trigger]');\n    var list = userbar.querySelector('.wagtail-userbar-items');\n    var className = 'is-active';\n    var hasTouch = 'ontouchstart' in window;\n    var clickEvent = 'click';\n    if (hasTouch) {\n        userbar.classList.add('touch');\n        // Bind to touchend event, preventDefault to prevent DELAY and CLICK\n        // in accordance with: https://hacks.mozilla.org/2013/04/detecting-touch-its-the-why-not-the-how/\n        trigger.addEventListener('touchend', function (e2) {\n            e.preventDefault();\n            // eslint-disable-next-line no-use-before-define\n            toggleUserbar(e2);\n        });\n    }\n    else {\n        userbar.classList.add('no-touch');\n    }\n    // eslint-disable-next-line no-use-before-define\n    trigger.addEventListener(clickEvent, toggleUserbar, false);\n    // make sure userbar is hidden when navigating back\n    // eslint-disable-next-line no-use-before-define\n    window.addEventListener('pageshow', hideUserbar, false);\n    function showUserbar() {\n        userbar.classList.add(className);\n        // eslint-disable-next-line no-use-before-define\n        list.addEventListener(clickEvent, sandboxClick, false);\n        // eslint-disable-next-line no-use-before-define\n        window.addEventListener(clickEvent, clickOutside, false);\n    }\n    function hideUserbar() {\n        userbar.classList.remove(className);\n        // eslint-disable-next-line no-use-before-define\n        list.addEventListener(clickEvent, sandboxClick, false);\n        // eslint-disable-next-line no-use-before-define\n        window.removeEventListener(clickEvent, clickOutside, false);\n    }\n    function toggleUserbar(e2) {\n        e2.stopPropagation();\n        if (userbar.classList.contains(className)) {\n            hideUserbar();\n        }\n        else {\n            showUserbar();\n        }\n    }\n    function sandboxClick(e2) {\n        e2.stopPropagation();\n    }\n    function clickOutside() {\n        hideUserbar();\n    }\n});\n"],"sourceRoot":""}