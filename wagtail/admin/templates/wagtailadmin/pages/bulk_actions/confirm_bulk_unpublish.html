{% extends 'wagtailadmin/bulk_actions/confirmation/base.html' %}
{% load i18n %}

{% block titletag %}{% blocktrans count counter=pages|length %}Unpublish 1 page {% plural %}Unpublish {{ counter }} pages{% endblocktrans %}{% endblock %}

{% block header %}
    {% trans "Unpublish" as unpublish_str %}
    {% include "wagtailadmin/shared/header.html" with title=unpublish_str icon="doc-empty-inverse" %}
{% endblock header %}

{% block objects_with_access %}
        {% if pages %}
        <p>{% trans "Are you sure you want to unpublish these pages?" %}</p>
        <ul>
            {% for page in pages %}
            <li>
                <a href="{% url 'wagtailadmin_pages:edit' page.page.id %}" target="_blank" rel="noopener noreferrer">{{ page.page.title }}</a>
                <p>
                    {% if page.live_descendant_count %}
                        {% blocktrans count counter=page.live_descendant_count %}
                        This page has one subpage
                        {% plural %}
                        This page has {{ counter }} subpages
                        {% endblocktrans %}
                    {% endif %}
                </p>
            </li>
            {% endfor %}
        </ul>
        {% endif %}
{% endblock objects_with_access %}

{% block objects_with_no_access %}

{% blocktrans asvar no_access_msg count counter=pages_with_no_access|length %}You don't have permission to unpublish this page{% plural %}You don't have permission to unpublish these pages{% endblocktrans %}
{% include './list_objects_with_no_access.html' with objects=pages_with_no_access no_access_msg=no_access_msg %}

{% endblock objects_with_no_access %}

{% block form_section %}
{% if pages %}
    {% trans 'Yes, unpublish' as action_button_text %}
    {% trans "No, don't unpublish" as no_action_button_text %}
    {% if has_live_descendants %}
        {% include 'wagtailadmin/bulk_actions/confirmation/form_with_fields.html' %}
    {% else %}
        {% include 'wagtailadmin/bulk_actions/confirmation/form.html' %}
    {% endif %}
{% else %}
    {% include 'wagtailadmin/bulk_actions/confirmation/go_back.html' %}
{% endif %}
{% endblock form_section %}
