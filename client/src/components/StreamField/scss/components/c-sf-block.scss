$header-icon-size: theme('spacing.4');
$header-button-size-mobile: $mobile-nice-padding;
$header-button-size: theme('spacing.8');

.c-sf-block {
  --divider-color: transparent;
  flex: 1 1 auto;
  margin-top: $block-margin-vertical;
  margin-inline-start: $block-margin-horizontal;

  @media (hover: hover) {
    &:is(:hover, :focus-within) {
      --divider-color: theme('colors.primary.DEFAULT');
    }
  }
}

.c-sf-block__header {
  display: flex;
  align-items: center;
  cursor: default;
  min-height: 30px;

  &--collapsible {
    cursor: pointer;
  }

  &--sortable {
    cursor: grab;
  }

  &__title {
    @apply w-label-2;
    display: inline-block;
    margin: 0;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
  }

  &__icon {
    color: theme('colors.primary.DEFAULT');
    width: $header-button-size-mobile;
    height: $header-button-size-mobile;
    padding: theme('spacing.[0.5]');
    margin-inline-start: calc(-1 * $header-button-size-mobile / 2);
    transition: color $hover-transition-duration ease-in-out;

    @include media-breakpoint-up(sm) {
      width: $header-button-size;
      height: $header-button-size;
      padding: theme('spacing.2');
      margin-inline-start: calc(-1 * $header-button-size / 2);
    }
  }
}

.c-sf-block__header__divider {
  flex: 1;
  height: 1px;
  background-image: linear-gradient(
    to right,
    var(--divider-color) 50%,
    rgba(255, 255, 255, 0) 0%
  );
  background-size: 6px 1px;
  background-repeat: repeat-x;
  margin-inline-start: theme('spacing.5');
  margin-inline-end: theme('spacing.5');
}

.c-sf-block__type {
  @apply w-label-2;
  overflow-x: hidden;
  text-overflow: ellipsis;

  .c-sf-block__header__title:not(:empty) + & {
    display: none;
  }
}

.c-sf-block__content {
  background-image: linear-gradient(
    to bottom,
    var(--divider-color) 50%,
    rgba(255, 255, 255, 0) 0%
  );
  background-size: 1px 6px;
  background-repeat: repeat-y;

  &-inner {
    padding-top: $content-padding-vertical;
    padding-inline-start: $content-padding-horizontal;

    .w-field__wrapper:last-child {
      // Donâ€™t add extra space after the last field inside a StreamField block.
      margin-bottom: 0;
    }
  }
}

.c-sf-block__actions {
  flex: 0 1 auto;
  display: flex;
  align-items: center;
  white-space: nowrap;
  overflow-x: hidden;
  padding: theme('spacing.4');
  margin: calc(-1 * theme('spacing.4'));

  &__cue,
  &__single {
    display: inline-grid;
    justify-items: center;
    align-items: center;
    width: $header-button-size-mobile;
    height: $header-button-size-mobile;

    @include media-breakpoint-up(sm) {
      width: $header-button-size;
      height: $header-button-size;
    }
  }

  &__single {
    appearance: none;
    border: 0 none;
    background: none;
    cursor: pointer;
    color: theme('colors.primary.DEFAULT');
    opacity: 1;
    transition: opacity $hover-transition-duration ease-in-out,
      color $hover-transition-duration ease-in-out,
      background-color $hover-transition-duration ease-in-out;
    border-radius: 50%;
    line-height: 1;
    font-size: $action-font-size;
    text-align: center;
    padding: 0;

    &:not(:last-of-type) {
      margin-inline-end: 3px;
    }

    &:focus,
    &:hover {
      color: $color-grey-1;
      background-color: $color-grey-4;
    }

    &[disabled] {
      opacity: 0.2;
      pointer-events: none;
    }
  }

  > * {
    visibility: hidden;
  }

  &__cue {
    position: absolute;
    visibility: visible;
  }

  @media (hover: hover) {
    .c-sf-block__header:is(:hover, :focus-within) & {
      > * {
        visibility: visible;
      }

      .c-sf-block__actions__cue {
        visibility: hidden;
      }
    }
  }

  svg.icon {
    width: $header-icon-size;
    height: $header-icon-size;
    vertical-align: middle;
  }
}
