{% load i18n wagtailadmin_tags %}

{% if show_locale_controls %}
    <div>
        {% if locale_options %}
            {% if selected_locale %}
                {% include "wagtailadmin/shared/locale_selector.html" with translations=locale_options locale=selected_locale only %}
            {% else %}
                {% include "wagtailadmin/shared/locale_selector.html" with translations=locale_options locale=parent_page.locale only %}
            {% endif %}
        {% else %}
            {% icon name="site" classname="default" %}
            {{ parent_page.locale.get_display_name }}
        {% endif %}
    </div>
{% endif %}

{% querystring p=None as querystring_value %}
{% page_breadcrumbs parent_page 'wagtailadmin_choose_page_child' include_self=False is_expanded=True querystring_value=querystring_value %}

{% if is_move_operation and page_to_move %}
    <div class="help-block help-info">
        {% icon name='info' %}
        {% blocktrans with title=page_to_move.get_admin_display_title type=page_type_names|join:", " count counter=page_type_names|length %}
            Moving "{{ title }}" - it can only be placed under pages of type "{{ type }}".
            Only valid parent pages and folders containing them are shown. Use the folder icons to explore deeper.
        {% plural %}
            Moving "{{ title }}" - it can only be placed under pages of types: {{ type }}.
            Only valid parent pages and folders containing them are shown. Use the folder icons to explore deeper.
        {% endblocktrans %}
    </div>
{% elif page_types_restricted %}
    <div class="help-block help-info">
        {% icon name='info' %}
        {% blocktrans with type=page_type_names|join:", " count counter=page_type_names|length %}
            Showing pages of type "{{ type }}" and folders that contain them.
            Click on folder icons to navigate deeper into the page tree.
        {% plural %}
            Showing pages of types: {{ type }} and folders that contain them.
            Click on folder icons to navigate deeper into the page tree.
        {% endblocktrans %}
    </div>
{% endif %}

{% component table %}

{% url 'wagtailadmin_choose_page_child' parent_page.id as pagination_base_url %}
{% paginate pagination_page base_url=pagination_base_url classname="navigate-pages" %}

<style>
    .title-wrapper {
        display: flex;
        align-items: center;
        gap: 0.5em;
    }
    
    .title-wrapper .icon {
        flex-shrink: 0;
    }
    
    /* Style for navigation-only folders */
    .title-wrapper .icon.folder {
        color: #ffc107;
    }
    
    .help-info {
        margin: 1em 0;
        padding: 0.8em 1em;
        background-color: #e4edf9;
        border-radius: 4px;
    }
    
    /* Enhanced navigation styling */
    .navigate-folder {
        display: flex;
        align-items: center;
        gap: 0.3em;
        padding: 0.3em 0.6em;
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 4px;
        text-decoration: none;
        color: #495057;
        transition: all 0.2s ease;
    }
    
    .navigate-folder:hover {
        background-color: #e9ecef;
        border-color: #adb5bd;
        text-decoration: none;
        color: #212529;
    }
    
    .navigate-hint {
        font-size: 0.85em;
        font-weight: 500;
    }
    
    .child-count {
        font-size: 0.8em;
        opacity: 0.7;
        margin-left: 0.2em;
    }
    
    .children .navigate-folder {
        background-color: #fff3cd;
        border-color: #ffeaa7;
        color: #856404;
    }
    
    .children .navigate-folder:hover {
        background-color: #ffeaa7;
        border-color: #ffdd57;
        color: #533f03;
    }
</style>
