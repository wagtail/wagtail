{% load i18n %}

<fieldset>
    <legend class="visuallyhidden">{% trans "Permissions" %}</legend>
    <h2>{% trans "Object permissions" %}</h2>
    <table class="listing">
        <col />
        <col width="15%" />
        <col width="15%" />
        <col width="15%" />
        {% if other_perms_exist %}
        <col width="30%" />
        {% endif %}
        <thead>
            <tr>
                <th>{% trans "Name" %}</th>
                <th>{% trans "Add" %}</th>
                <th>{% trans "Change" %}</th>
                <th>{% trans "Delete" %}</th>
                {% if other_perms_exist %}
                <th>{% trans "Other permissions" %}</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for content_perms_dict in object_perms %}
            <tr>
                <td class="title"><h3>{{ content_perms_dict.object|capfirst }}</h3></td>
                <td>
                    {% if content_perms_dict.add %}
                        <label for="{{ content_perms_dict.add.checkbox.id_for_label }}" class="visuallyhidden">{{ content_perms_dict.add.perm.name }}</label>
                        {{ content_perms_dict.add.checkbox.tag }}
                    {% endif %}
                </td>
                <td>
                    {% if content_perms_dict.change %}
                        <label for="{{ content_perms_dict.change.checkbox.id_for_label }}" class="visuallyhidden">{{ content_perms_dict.change.perm.name }}</label>
                        {{ content_perms_dict.change.checkbox.tag }}
                    {% endif %}
                </td>
                <td>
                    {% if content_perms_dict.delete %}
                        <label for="{{ content_perms_dict.delete.checkbox.id_for_label }}" class="visuallyhidden">{{ content_perms_dict.delete.perm.name }}</label>
                        {{ content_perms_dict.delete.checkbox.tag }}
                    {% endif %}
                </td>
                {% if other_perms_exist %}
                <td>
                    {% if content_perms_dict.other %}
                    <fieldset class="other-permissions">
                        <legend>{% trans "Other permissions" %}</legend>
                        {% for other_perm in content_perms_dict.other %}
                        <label class="other-permissions-item">
                            <input type="checkbox" name="permissions" value="{{ other_perm.perm.id }}" {% if other_perm.selected %}checked{% endif %}>
                            {{ other_perm.name }}
                        </label>
                        {% endfor %}
                    </fieldset>
                    {% endif %}
                </td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</fieldset>
