{% extends "wagtailadmin/base.html" %}
{% load i18n %}
{% block titletag %}{% blocktrans with title=document.title %}{{ title }} Usage{% endblocktrans %}{% endblock %}
{% block content %}

    {% include "wagtailadmin/shared/header.html" with title="Usage" %}

    <div class="nice-padding">
        <section>
            <table class="listing">
                <col />
                <col width="30%"/>
                <col width="15%"/>
                <col width="15%"/>
                <thead>
                    <tr>
                        <th class="title">{% trans "Title" %}</th>
                        <th>{% trans "Parent" %}</th>
                        <th>{% trans "Type" %}</th>
                        <th>{% trans "Status" %}</th>
                    </tr>
                </thead>
                <tbody>
          {% for page in used_by %}
                    <tr>
                        <td class="title" valign="top">
                            <h2><a href="{% url 'wagtailadmin_pages_edit' page.id %}" title="{% trans 'Edit this page' %}">{{ page.title }}</a></h2>
                        </td>
                        <td>
                          {% if page.get_parent %}
                            <a href="{% url 'wagtailadmin_explore' page.get_parent.id %}">{{ page.get_parent.title }}</a>
                          {% endif %}
                        </td>
                        <td>
                          {{ page.content_type.model_class.get_verbose_name }}
                        </td>
                        <td>
                          {% if page.live %}
                          <a href="{{ page.url }}" target="_blank" class="status-tag {% if page.status_string != "draft" %}primary{% endif %}">{{ page.status_string }}</a>
                          {% else %}
                          <span class="status-tag {% if page.status_string != "draft" %}primary{% endif %}">{{ page.status_string }}</span>
                          {% endif %}
                        </td>
                    </tr>
          {% endfor %}
                </tbody>
            </table>
        </section>
    </div>
    <div class="pagination">
        {% if used_by.has_previous %}
        <a href="?p={{ used_by.previous_page_number }}">previous</a>
        {% endif %}

        <span>
          Page {{ used_by.number }} of {{ used_by.paginator.num_pages }}.
        </span>

        {% if used_by.has_next %}
        <a href="?p={{ used_by.next_page_number }}">next</a>
        {% endif %}
    </div>

{% endblock %}
