{% extends "wagtailadmin/base.html" %}
{% load i18n wagtailadmin_tags %}

{% block titletag %}{{ title }}{% endblock %}

{% block content %}
    <header role="banner">
        <div class="row nice-padding">
            <div class="left">
                <div class="col header-title">
                    <h1 class="icon icon-{{ header_icon }}">{{ title }}{% if subtitle %} <span>{{ subtitle }}</span>{% endif %}</h1>
                </div>
            </div>
            <div class="right">
                {% block actions %}
                    {% if view.list_export %}
                        <div class="dropdown dropdown-button match-width">
                            <a href="{{ view.xlsx_export_url }}" class="button bicolor icon icon-download">{% trans 'Download XLSX' %}</a>
                            <div class="dropdown-toggle icon icon-arrow-down"></div>
                            <ul>
                                <li><a  class="button bicolor icon icon-download" href="{{ view.csv_export_url }}">{% trans 'Download CSV' %}</a></li>
                            </ul>
                        </div>
                    {% endif %}
                {% endblock %}
            </div>
        </div>
    </header>

    <div class="report{% if filters %} report--has-filters{% endif %}">
        <div class="report__results">
            {% block results %}
            {% endblock %}
        </div>
        {% if filters %}
            <div class="report__filters">
                <h2>{% trans 'Filter' %}</h2>
                <form method="get">
                    {% for filter in filters.form %}
                        {{ filter.label_tag }}
                        {{ filter }}
                        {{ filter.errors }}
                    {% endfor %}
                    <button class="button button-longrunning" type="submit">{% trans 'Apply filters' %}</button>
                </form>
            </div>
        {% endif %}
    </div>
{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% versioned_static 'wagtailadmin/css/layouts/report.css' %}" type="text/css" />
{% endblock %}
